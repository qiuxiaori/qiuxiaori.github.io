{"title":"npm包开发","date":"2020-07-20T07:05:18.550Z","date_formatted":{"ll":"Jul 20, 2020","L":"07/20/2020","MM-DD":"07-20"},"link":"2020/07/20/npm包开发","tags":["npm"],"categories":["编程技术"],"updated":"2020-07-20T07:05:18.550Z","content":"<h4 id=\"一.-配置eslint\">一. 配置eslint<a title=\"#一.-配置eslint\" href=\"#一.-配置eslint\"></a></h4>\n<ul>\n<li>安装eslint: <code>npm i eslint -g</code></li>\n<li>初始化eslint配置: <code>eslint --init</code> 生成 .eslintrc.js 文件</li>\n<li>忽略目录校验: 创建 .eslintignore.js 文件把不需要校验的目录放进去</li>\n<li>配置scripts: 在 package.json 文件中添加scripts命令,<code>&quot;lint&quot;: &quot;eslint --fix -src&quot;</code></li>\n</ul>\n<h4 id=\"二.-编写代码\">二. 编写代码<a title=\"#二.-编写代码\" href=\"#二.-编写代码\"></a></h4>\n<ul>\n<li>在src目录下编写代码</li>\n</ul>\n<h4 id=\"三.-babel编译\">三. babel编译<a title=\"#三.-babel编译\" href=\"#三.-babel编译\"></a></h4>\n<blockquote>\n<p>在低版本的 node 可能还不支持某些 es6 语法，比如对象解构等，所以需要使用 babel 编译成低版本也能识别的语法。<br>\n我们把 src 目录里的代码编译到 lib 目录，然后我们在 package.json 里，把 “main” 改为 “lib/index.js”，这样对外暴露出去的代码就不会出现兼容性问题。</p>\n</blockquote>\n<ul>\n<li>安装babel依赖： <code>npm install --save-dev babel-cli</code></li>\n<li>下载预设：<code>npm install --save-dev babel-preset-es2015</code></li>\n<li>配置 .babelrc 文件:</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"presets\"</span>: [<span class=\"string\">\"es2015\"</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>配置 scripts:</li>\n</ul>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// package.json</span></span><br><span class=\"line\">\"scripts\": &#123;</span><br><span class=\"line\">  \"build\": \"babel src -d lib\",</span><br><span class=\"line\">  \"build:watch\": \"npm run build -- --watch\"</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"四.-编写测试\">四. 编写测试<a title=\"#四.-编写测试\" href=\"#四.-编写测试\"></a></h4>\n<h4 id=\"五.-持续集成\">五. 持续集成<a title=\"#五.-持续集成\" href=\"#五.-持续集成\"></a></h4>\n<h4 id=\"六.-发布\">六. 发布<a title=\"#六.-发布\" href=\"#六.-发布\"></a></h4>\n<ul>\n<li>注册npm账号并验证</li>\n<li>添加npm用户信息,执行<code>npm adduser</code>命令输入用户名和密码</li>\n<li>发布 <code>npm publish</code></li>\n</ul>\n<h4 id=\"七.-版本升级\">七. 版本升级<a title=\"#七.-版本升级\" href=\"#七.-版本升级\"></a></h4>\n<ul>\n<li>升级补丁版本号：<code> npm version patch</code></li>\n<li>升级小版本号：<code>npm version minor</code></li>\n<li>升级大版本号：<code>npm version major</code></li>\n</ul>\n<h4 id=\"八.-删除包\">八. 删除包<a title=\"#八.-删除包\" href=\"#八.-删除包\"></a></h4>\n<ul>\n<li>删除已发布的包: <code>npm unpublish [packageName] -force</code></li>\n</ul>\n","prev":{"title":"powershell美化","link":"2020/07/20/powershell美化"},"next":{"title":"node线上部署pm2篇","link":"2020/07/20/node线上部署pm2篇"},"plink":"http://qiuxiaori.github.com/2020/07/20/npm包开发/","toc":[{"id":"一.-配置eslint","title":"一. 配置eslint","index":"1"},{"id":"二.-编写代码","title":"二. 编写代码","index":"2"},{"id":"三.-babel编译","title":"三. babel编译","index":"3"},{"id":"四.-编写测试","title":"四. 编写测试","index":"4"},{"id":"五.-持续集成","title":"五. 持续集成","index":"5"},{"id":"六.-发布","title":"六. 发布","index":"6"},{"id":"七.-版本升级","title":"七. 版本升级","index":"7"},{"id":"八.-删除包","title":"八. 删除包","index":"8"}],"copyright":{"author":"Qiu Xiaori","license":"自由转载-非商用-禁止演绎-保持署名（CC BY-NC-ND 4.0)","link":"<a href=\"http://qiuxiaori.github.com/2020/07/20/npm包开发/\" title=\"npm包开发\">http://qiuxiaori.github.com/2020/07/20/npm包开发/</a>"}}